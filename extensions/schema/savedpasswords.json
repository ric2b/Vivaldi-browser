// Copyright (c) 2015 Vivaldi Technologies AS. All rights reserved

[
  {
    "namespace": "savedpasswords",
    "description": "Use the <code>chrome.savedpasswords</code> to display & delete saved passwords.",
    "types": [
      {
        "id": "SavedPasswordItem",
        "type": "object",
        "description": "Item containing saved password.",
        "properties": {
          "index": {
            "type": "string",
            "serialized_type": "int64",
            "name": "index",
            "description": "Saved password index in the list."
          },
          "origin": {
            "type": "string",
            "description": "The origin url of saved password."
          },
          "username": {
            "type": "string",
            "description": "The user name of saved password."
          },
          "password": {
            "type": "string",
            "description": "The password in clear text."
         }
        }
      },
      {
        "id": "PasswordForm",
        "type": "object",
        "description": "Information about the password form to store or retrieve. The fields should match those documented in chromium/components/password_manager/core/browser/password_form.h",
        "properties": {
          "signon_realm": {
            "type": "string"
          },
          "origin": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string",
            "optional": true
          }
        }
      }
    ],
    "functions": [
      {
        "name": "createDelegate",
        "type": "function",
        "description": "Creates a passwords_private_delegate for the current user profile.",
        "parameters": []
      },
      {
        "name": "add",
        "type": "function",
        "description": "Stores a password in the password store.",
        "parameters": [
          {
            "name": "isExplicit",
            "type": "boolean",
            "description": "The action was initiated as the result of user input"
          },
          {
            "name": "passwordForm",
            "$ref": "PasswordForm"
          }
        ]
      },
      {
        "name": "get",
        "type": "function",
        "description": "Retrieves a password in the password store.",
        "parameters": [
          {
            "name": "passwordForm",
            "$ref": "PasswordForm"
          }
        ],
        "returns_async": {
          "name": "callback",
          "does_not_support_promises": "vivaldi",
          "parameters": [
            {
              "name": "found",
              "type": "boolean"
            },
            {
              "name": "password",
              "type": "string"
            }
          ]
        }
      },
      {
        "name": "delete",
        "type": "function",
        "description": "Removes a password in the password store.",
        "parameters": [
          {
            "name": "isExplicit",
            "type": "boolean",
            "description": "The action was initiated as the result of user input"
          },
          {
            "name": "passwordForm",
            "$ref": "PasswordForm"
          }
        ]
      },
      {
        "name": "getList",
        "type": "function",
        "description": "Retrieves list of saved passwords.",
        "parameters": [],
        "returns_async": {
          "name": "callback",
          "parameters": [
            {
              "name": "results",
              "type": "array",
              "items": { "$ref": "SavedPasswordItem" }
            }
          ]
        }
      },
      {
        "name": "remove",
        "type": "function",
        "description": "Removes an item from the list retrieved with getList.",
        "parameters": [
          {
            "type": "string",
            "serialized_type": "int64",
            "name": "id"
          }
        ],
        "returns_async": {
          "name": "callback",
          "optional": true,
          "parameters": []
        }
      },
      {
        "name": "authenticate",
        "type": "function",
        "description": "Before showing password to the user, make sure they are authenticated via the OS.",
        "parameters": [
          {
            "name": "windowId",
            "type": "integer"
          }
        ],
        "returns_async": {
          "name": "callback",
          "parameters": [
            {
              "name": "success",
              "type": "boolean",
              "description": "true if the user is authenticated to be able to view passwords in cleartext, otherwise false."
            }
          ]
        }
      }
    ]
  }
]
